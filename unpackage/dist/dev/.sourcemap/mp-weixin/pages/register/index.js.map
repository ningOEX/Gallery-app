{"version":3,"file":"index.js","sources":["pages/register/index.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVnaXN0ZXIvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"login-box\">\r\n\t\t\t<text class=\"title\">账号注册！</text>\r\n\t\t\t<view class=\"input-item\">\r\n\t\t\t\t<image src=\"/static/login/icon_phone.png\" mode=\"aspectFill\" class=\"icon\"></image>\r\n\t\t\t\t<uni-easyinput type=\"number\" @blur=\"blurUsername\" placeholder-style=\"font-size:30rpx;\" maxlength=\"11\" v-model=\"username\" :input-border=\"false\" placeholder=\"请输入手机号\"></uni-easyinput>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"input-item\">\r\n\t\t\t\t<image src=\"/static/login/icon_passwrod.png\" mode=\"aspectFill\" class=\"icon\"></image>\r\n\t\t\t\t<uni-easyinput type=\"password\" @blur=\"blurPassword\" placeholder-style=\"font-size:30rpx;\" maxlength=\"18\" v-model=\"password\" :input-border=\"false\" placeholder=\"请输入密码\"></uni-easyinput>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"input-item\">\r\n\t\t\t\t<image src=\"/static/login/icon_pwd.png\" mode=\"aspectFill\" class=\"icon\"></image>\r\n\t\t\t\t<uni-easyinput type=\"password\" placeholder-style=\"font-size:30rpx;\" maxlength=\"18\" v-model=\"once_passwrod\" :input-border=\"false\" placeholder=\"再次输入密码\"></uni-easyinput>\r\n\t\t\t</view>\r\n\t\t\t<!-- <text class=\"forgot-password\">忘记密码？</text> -->\r\n\t\t\t<button class=\"login-button\" @click=\"registerUser\">立即注册</button>\r\n\t\t\t<view class=\"register-link\">\r\n\t\t\t\t<text>已有账号！<text @click=\"goToLogin\" class=\"register\">前往登录</text></text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\timport { ref } from \"vue\"\r\n\timport {validatePhoneNumber,validatePassword} from \"@/utils/index\"\r\n\r\n\tconst username = ref('')\r\n\tconst password = ref('')\r\n\tconst once_passwrod = ref('')\r\n\t\r\n\t/**\r\n\t * 手机输入框失去焦点校验\r\n\t */\r\n\tconst blurUsername = ()=>{\r\n\t\tif(!validatePhoneNumber(username.value)){\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请输入正确手机号',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\t\r\n\t/**\r\n\t * 密码失去焦点验证\r\n\t */\r\n\tconst blurPassword = ()=>{\r\n\t\tif(!validatePassword(password.value)){\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '输入密码长度过短！',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn false\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\t\r\n\t\r\n\t// 注册\r\n\tconst registerUser = async () => {\r\n\t\tif (!username.value || !password.value) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请输入用户名和密码',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (password.value !== once_passwrod.value) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '密码不一致，重新输入！',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\treturn\r\n\t\t}\r\n\t\t\r\n\t\tif(validatePhoneNumber(username.value) && validatePassword(password.value)){\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle:'注册中...'\r\n\t\t\t})\r\n\t\t\tconst res = await uniCloud.callFunction({\r\n\t\t\t\tname: 'api_register',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tusername: username.value,\r\n\t\t\t\t\tpassword: password.value\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tuni.__f__('log','at pages/register/index.vue:92',res);\r\n\t\t\tif(res.result.code === 200){\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '成功注册，正在为您登录...',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t});\r\n\t\t\t\tconst user = {\r\n\t\t\t\t\tusername:username.value,\r\n\t\t\t\t\tid:res.result.userId,\r\n\t\t\t\t}\r\n\t\t\t\tuni.setStorageSync('user', user);\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl:\"/pages/index/index\"\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.result.message,\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 前往登录\r\n\tconst goToLogin = () => {\r\n\t\tuni.redirectTo({\r\n\t\t\turl: '/pages/login/index'\r\n\t\t});\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\theight: 100vh;\r\n\t\tbackground: linear-gradient(45deg, #eff4fb, #eff4fb, #abceff);\r\n\t\tbox-sizing: border-box;\r\n\t\tz-index: 999;\r\n\r\n\t\t.login-box {\r\n\t\t\tposition: relative;\r\n\t\t\tz-index: 999;\r\n\t\t\tbackground-color: white;\r\n\t\t\tborder-radius: 20px;\r\n\t\t\tpadding: 20px;\r\n\t\t\twidth: 90%;\r\n\t\t\tmax-width: 400px;\r\n\t\t\tbox-shadow: 0 0px 6px rgba(0, 0, 0, 0.1);\r\n\t\t\tmargin: 0 20rpx;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tfont-size: 24px;\r\n\t\t\t\tmargin-bottom: 20px;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tcolor: #ff6b81;\r\n\t\t\t}\r\n\r\n\t\t\t.input-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tborder: 1px solid #abceff;\r\n\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\tpadding: 0 30rpx 0 18rpx;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t\t.icon {\r\n\t\t\t\t\twidth: 50rpx;\r\n\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.forgot-password {\r\n\t\t\t\tcolor: rgba(0, 0, 0, 0.4);\r\n\t\t\t\ttext-align: right;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tpadding: 10rpx 0;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t.login-button {\r\n\t\t\t\tbackground-color: #ff6b81;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tborder: none;\r\n\t\t\t\tborder-radius: 50px;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.register-link {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\twidth: 80%;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tz-index: -1;\r\n\t\t\t\tbottom: -84rpx;\r\n\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\tleft: 50%;\r\n\t\t\t\ttransform: translateX(-50%);\r\n\t\t\t\tbackground-color: #fbfcff;\r\n\t\t\t\tborder-bottom-left-radius: 20rpx;\r\n\t\t\t\tborder-bottom-right-radius: 20rpx;\r\n\t\t\t\tbox-shadow: 0 0px 6px rgba(0, 0, 0, 0.1);\r\n\r\n\t\t\t\ttext {\r\n\t\t\t\t\tcolor: rgba(0, 0, 0, 0.4);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.register {\r\n\t\t\t\t\tcolor: #ed61ff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'F:/NingChaoWeiProjdect/Gallery-app/pages/register/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","validatePhoneNumber","uni","validatePassword","uniCloud"],"mappings":";;;;;;;;;;;AA6BO,UAAA,WAAWA,kBAAI,EAAE;AACjB,UAAA,WAAWA,kBAAI,EAAE;AACjB,UAAA,gBAAgBA,kBAAI,EAAE;AAK5B,UAAM,eAAe,MAAI;AACxB,UAAG,CAACC,YAAA,oBAAoB,SAAS,KAAK,GAAE;AACvCC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACN;AACM,eAAA;AAAA,MACR;AACO,aAAA;AAAA,IAAA;AAMR,UAAM,eAAe,MAAI;AACxB,UAAG,CAACC,YAAA,iBAAiB,SAAS,KAAK,GAAE;AACpCD,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACN;AACM,eAAA;AAAA,MACR;AACO,aAAA;AAAA,IAAA;AAKR,UAAM,eAAe,YAAY;AAChC,UAAI,CAAC,SAAS,SAAS,CAAC,SAAS,OAAO;AACvCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACN;AACD;AAAA,MACD;AAEI,UAAA,SAAS,UAAU,cAAc,OAAO;AAC3CA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACN;AACD;AAAA,MACD;AAEA,UAAGD,YAAAA,oBAAoB,SAAS,KAAK,KAAKE,YAAAA,iBAAiB,SAAS,KAAK,GAAE;AAC1ED,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAM;AAAA,QAAA,CACN;AACK,cAAA,MAAM,MAAME,cAAA,GAAS,aAAa;AAAA,UACvC,MAAM;AAAA,UACN,MAAM;AAAA,YACL,UAAU,SAAS;AAAA,YACnB,UAAU,SAAS;AAAA,UACpB;AAAA,QAAA,CACA;AACGF,sBAAAA,MAAA,MAAM,OAAM,kCAAiC,GAAG;AACjD,YAAA,IAAI,OAAO,SAAS,KAAI;AAC1BA,wBAAA,MAAI,YAAY;AAChBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UAAA,CACN;AACD,gBAAM,OAAO;AAAA,YACZ,UAAS,SAAS;AAAA,YAClB,IAAG,IAAI,OAAO;AAAA,UAAA;AAEXA,wBAAAA,MAAA,eAAe,QAAQ,IAAI;AAC/BA,wBAAAA,MAAI,UAAU;AAAA,YACb,KAAI;AAAA,UAAA,CACJ;AAAA,QAAA,OACG;AACJA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI,OAAO;AAAA,YAClB,MAAM;AAAA,UAAA,CACN;AAAA,QACF;AAAA,MACD;AAAA,IAAA;AAID,UAAM,YAAY,MAAM;AACvBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MAAA,CACL;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtHH,GAAG,WAAW,eAAe;"}